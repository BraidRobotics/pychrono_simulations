{% extends "layout.html" %}
{% block title %}Elastic Recovery Analysis{% endblock %}
{% block body %}

<h1>Elastic Recovery Analysis (Force/No-Force Experiments)</h1>

<p>
    This analysis explores how <strong>strand count and layer count</strong> affect elastic recovery after removing applied force.
    All experiments use <strong>0.007m material thickness</strong> with forces optimized per configuration to achieve comparable compression levels.
</p>

<div id="compression-validation">
    <h2><a href="#compression-validation">Compression Validation</a></h2>
    <p>
        <strong>Purpose:</strong> Validates that force scaling worked correctly across all configurations.<br>
        <strong>Target:</strong> All configurations should achieve 10-15% compression for comparable testing.<br>
        <strong>Interpretation:</strong> Bars within the target range indicate successful force calibration.<br>
        <strong>Color:</strong> Coded by strand count to show scaling pattern.
    </p>
    {% if compression_validation_graph_path %}
    <iframe src="/graphs/{{ compression_validation_graph_path }}" width="100%" height="650" frameborder="0"></iframe>
    {% else %}
    <p>No data available for compression validation graph.</p>
    {% endif %}
</div>

<div id="stiffness-comparison">
    <h2><a href="#stiffness-comparison">Effective Stiffness Comparison</a></h2>
    <p>
        <strong>Purpose:</strong> Shows structural stiffness (k = F/Δx) across all configurations.<br>
        <strong>Value:</strong> Fundamental mechanical property - higher stiffness = more force needed for same compression.<br>
        <strong>Use:</strong> Identifies which strand/layer combinations provide desired stiffness characteristics.<br>
        <strong>Color:</strong> Red = higher stiffness (stiffer structure), Yellow = lower stiffness (more compliant).
    </p>
    {% if stiffness_comparison_graph_path %}
    <iframe src="/graphs/{{ stiffness_comparison_graph_path }}" width="100%" height="650" frameborder="0"></iframe>
    {% else %}
    <p>No data available for stiffness comparison graph.</p>
    {% endif %}
</div>

<div id="recovery-consistency">
    <h2><a href="#recovery-consistency">Recovery Consistency</a></h2>
    <p>
        <strong>Purpose:</strong> Shows recovery reliability - average ± standard deviation.<br>
        <strong>Interpretation:</strong> Smaller error bars = more consistent/reliable behavior.<br>
        <strong>Use:</strong> Identifies configurations with predictable recovery for practical applications.<br>
        <strong>Key Metric:</strong> High average recovery + low variance = optimal for real-world use.
    </p>
    {% if recovery_consistency_graph_path %}
    <iframe src="/graphs/{{ recovery_consistency_graph_path }}" width="100%" height="650" frameborder="0"></iframe>
    {% else %}
    <p>No data available for recovery consistency graph.</p>
    {% endif %}
</div>

<div id="recovery-strands">
    <h2><a href="#recovery-strands">Recovery Quality by Strand Count</a></h2>
    <p>
        <strong>Purpose:</strong> Shows how strand count affects elastic recovery at comparable compression levels.<br>
        <strong>Metric:</strong> Recovery % = (final_height - height_under_load) / (original_height - height_under_load) × 100<br>
        <strong>Key Question:</strong> Do structures with more strands recover better or worse?<br>
        <strong>Note:</strong> Forces are scaled per strand count (4s:-2.5N, 6s:-4.5N, 8s:-7N, 10s:-9N, 12s:-11N) to achieve similar compression.
    </p>
    {% if recovery_by_strands_graph_path %}
    <iframe src="/graphs/{{ recovery_by_strands_graph_path }}" width="100%" height="600" frameborder="0"></iframe>
    {% else %}
    <p>No data available for recovery by strands graph.</p>
    {% endif %}
</div>

<div id="recovery-layers">
    <h2><a href="#recovery-layers">Recovery Quality by Layer Count</a></h2>
    <p>
        <strong>Purpose:</strong> Shows how layer count affects elastic recovery.<br>
        <strong>Expected:</strong> More layers may improve recovery (more structure) or worsen it (higher susceptibility to buckling).<br>
        <strong>Comparison:</strong> 2-layer, 3-layer, and 4-layer configurations across all strand counts.
    </p>
    {% if recovery_by_layers_graph_path %}
    <iframe src="/graphs/{{ recovery_by_layers_graph_path }}" width="100%" height="600" frameborder="0"></iframe>
    {% else %}
    <p>No data available for recovery by layers graph.</p>
    {% endif %}
</div>

<div id="heatmap-strands-layers">
    <h2><a href="#heatmap-strands-layers">Multi-Parameter Heatmap: Strands vs. Layers</a></h2>
    <p>
        <strong>Purpose:</strong> 2D visualization showing recovery quality across all strand and layer combinations.<br>
        <strong>Use:</strong> Identifies optimal parameter combinations and interaction effects.<br>
        <strong>Color:</strong> Brighter = better recovery percentage.<br>
        <strong>Configurations:</strong> 15 total (5 strand counts × 3 layer counts).
    </p>
    {% if recovery_heatmap_strands_layers_path %}
    <iframe src="/graphs/{{ recovery_heatmap_strands_layers_path }}" width="100%" height="650" frameborder="0"></iframe>
    {% else %}
    <p>No data available for strands-layers heatmap.</p>
    {% endif %}
</div>

<div id="recovery-parameter-importance">
    <h2><a href="#recovery-parameter-importance">Elastic Recovery: Parameter Importance</a></h2>
    <p>
        <strong>Purpose:</strong> Shows which parameter (layers or strands) has the strongest correlation with elastic recovery quality.<br>
        <strong>Formula:</strong> Correlation = |Pearson(parameter, recovery_percent)|<br>
        <strong>Where:</strong> recovery_percent = ((final_height - height_under_load) / (original_height - height_under_load)) × 100<br>
        <strong>Analysis:</strong> Uses Pearson linear correlation coefficients (numpy.corrcoef) between each parameter and recovery percentage.<br>
        <strong>Interpretation:</strong> Taller bar = that parameter is more important for optimizing elastic recovery after force removal.<br>
        <strong>Use:</strong> Focus recovery optimization efforts on the most influential parameter.<br>
        <strong>Note:</strong> Material thickness is constant (0.007m) across all force/no-force experiments.
    </p>
    {% if recovery_parameter_importance_graph_path %}
    <iframe src="/graphs/{{ recovery_parameter_importance_graph_path }}" width="100%" height="600" frameborder="0"></iframe>
    {% else %}
    <p>No data available for elastic recovery parameter importance analysis.</p>
    {% endif %}
</div>

<div id="load-bearing-parameter-importance">
    <h2><a href="#load-bearing-parameter-importance">Load Bearing Capability: Parameter Importance</a></h2>
    <p>
        <strong>Purpose:</strong> Shows which parameter (layers or strands) has the strongest correlation with load bearing capability.<br>
        <strong>Formula:</strong> Correlation = |Pearson(parameter, specific_load_capacity)|<br>
        <strong>Where:</strong> specific_load_capacity = max_force / (weight_kg × 9.81)<br>
        <strong>Analysis:</strong> Uses Pearson linear correlation coefficients (numpy.corrcoef) between each parameter and specific load capacity.<br>
        <strong>Interpretation:</strong> Taller bar = that parameter is more important for maximizing structural strength.<br>
        <strong>Use:</strong> Focus structural optimization efforts on the most influential parameter.<br>
        <strong>Data:</strong> Analyzes the maximum force each configuration can support during compression phase of force/no-force experiments.<br>
        <strong>Note:</strong> Material thickness is constant (0.007m) across all experiments.
    </p>
    {% if load_bearing_parameter_importance_graph_path %}
    <iframe src="/graphs/{{ load_bearing_parameter_importance_graph_path }}" width="100%" height="600" frameborder="0"></iframe>
    {% else %}
    <p>No data available for load bearing parameter importance analysis.</p>
    {% endif %}
</div>

<div id="equilibrium-time">
    <h2><a href="#equilibrium-time">Equilibrium Time Analysis</a></h2>
    <p>
        <strong>Purpose:</strong> Shows how long structures take to reach equilibrium after force removal.<br>
        <strong>Metric:</strong> Average time (seconds) for the system to stabilize after releasing applied force.<br>
        <strong>Interpretation:</strong> Shorter equilibrium times indicate faster structural response and better damping characteristics.<br>
        <strong>Use:</strong> Identifies parameter combinations that lead to faster settling behavior.
    </p>
    {% if equilibrium_time_graph_path %}
    <iframe src="/graphs/{{ equilibrium_time_graph_path }}" width="100%" height="650" frameborder="0"></iframe>
    {% else %}
    <p>No data available for equilibrium time analysis.</p>
    {% endif %}
</div>

{% endblock %}
