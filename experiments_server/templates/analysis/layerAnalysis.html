{% extends "layout.html" %}
{% block title %}Layer Analysis{% endblock %}
{% block body %}

<h1>Layer Count Analysis</h1>

<p>
    This analysis explores how the number of layers affects structural performance.
    <strong>Note:</strong> Adding layers increases both material and height proportionally.
    All measurements are taken at <strong>10% height compression</strong> for consistent comparison.
</p>

<div id="height-reduction-vs-force">
    <h2><a href="#height-reduction-vs-force">Height Reduction vs. Force</a></h2>
    <p>
        <strong>Purpose:</strong> Shows how different layer configurations respond to applied force.<br>
        <strong>Comparison:</strong> All layer counts (number_of_layers__02 through number_of_layers__08) plotted together to compare force-displacement behavior.
    </p>
    {% if layer_height_reduction_vs_force_path %}
    <iframe src="/graphs/{{ layer_height_reduction_vs_force_path }}" width="100%" height="600" frameborder="0"></iframe>
    {% else %}
    <p>No data available for height reduction vs. force graph.</p>
    {% endif %}
</div>

<div id="height-validation">
    <h2><a href="#height-validation">Height vs. Layer Count Validation</a></h2>
    <p>
        <strong>Purpose:</strong> Validates that the simulated structure height follows the geometric construction.<br>
        <strong>Theory:</strong> Height should scale linearly with layer count: H = num_layers × pitch. Each layer adds a fixed vertical spacing (pitch) between connection points.<br>
        <strong>Expected:</strong> Near-linear relationship with slight compression due to the structure settling under its own weight. Data points should closely follow the linear fit.
    </p>
    {% if layer_height_graph_path %}
    <iframe src="/graphs/{{ layer_height_graph_path }}" width="100%" height="550" frameborder="0"></iframe>
    {% else %}
    <p>No data available for height validation graph.</p>
    {% endif %}
</div>

<div id="load-bearing-capacity">
    <h2><a href="#load-bearing-capacity">Load-Bearing Capacity vs. Layer Count</a></h2>
    <p>
        <strong>Purpose:</strong> Reveals how load-bearing capacity scales with layer count (and proportional height increase).<br>
        <strong>Theoretical Models:</strong>
    </p>
    <ul>
        <li><strong>Linear (F ∝ n):</strong> Material increase dominates</li>
        <li><strong>Sublinear (F ∝ √n or constant):</strong> Buckling from increased height dominates</li>
        <li><strong>Peak and decline:</strong> Optimal slenderness ratio exists</li>
    </ul>
    <p>
        <strong>Interpretation:</strong> If force plateaus or decreases, structures become too slender and buckling limits capacity.
    </p>
    {% if layer_force_graph_path %}
    <iframe src="/graphs/{{ layer_force_graph_path }}" width="100%" height="650" frameborder="0"></iframe>
    {% else %}
    <p>No data available for load-bearing capacity graph.</p>
    {% endif %}
</div>

<div id="efficiency">
    <h2><a href="#efficiency">Structural Efficiency vs. Layer Count</a></h2>
    <p>
        <strong>Purpose:</strong> Determines if adding layers improves or degrades weight efficiency.<br>
        <strong>Question Answered:</strong> Is there an optimal number of layers for maximum load per unit weight?<br>
        <strong>Expected:</strong> Efficiency likely decreases as structures become taller and more prone to buckling.
    </p>
    {% if layer_efficiency_graph_path %}
    <iframe src="/graphs/{{ layer_efficiency_graph_path }}" width="100%" height="650" frameborder="0"></iframe>
    {% else %}
    <p>No data available for structural efficiency graph.</p>
    {% endif %}
</div>

{% endblock %}
